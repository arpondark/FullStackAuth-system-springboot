{
	"info": {
		"_postman_id": "6c3a5b41-c566-43b5-8acd-977801bdf6c3",
		"name": "Auth rest apis",
		"description": "# üöÄ Full Stack Auth API Collection\n\nThis collection contains all authentication endpoints including email verification and password reset flows.\n\n## üìã Endpoints\n\n### Authentication\n- **POST /api/auth/signup** - Register a new user (sends verification email)\n- **GET /api/auth/verify** - Verify email using token from email link\n- **POST /api/auth/login** - Login with email and password\n- **GET /api/auth/isAuthenticated** - Check if user is authenticated\n\n### Password Reset\n- **POST /api/auth/request-password-reset** - Request password reset (sends reset link email)\n- **POST /api/auth/reset-password** - Reset password using token\n\n## üîß Environment Variables\n\nSet these variables in your Postman environment:\n- `base_url` - Base URL of your API (e.g., http://localhost:8080)\n- `token_verification` - Verification token from signup email\n- `token_reset` - Reset token from password reset email\n\n## üìù Notes\n\n- All tokens are logged to console when generated\n- Verification tokens expire in 24 hours\n- Reset tokens expire in 15 minutes\n- Check application logs for generated tokens",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "38428231"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Signup",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"user_email\", jsonData.email);",
									"    pm.test(\"Response contains user data\", function () {",
									"        pm.expect(jsonData).to.have.property('email');",
									"        pm.expect(jsonData).to.have.property('userId');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"John Doe\",\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"SecurePassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"register"
							]
						},
						"description": "Register a new user account.\n\n**Request Body:**\n- `name` (string, required): User's full name\n- `email` (string, required): User's email address\n- `password` (string, required): User's password\n\n**Response:**\n- Status: 201 Created\n- Body: User profile data including userId, name, email, and isAccountVerified (false)\n\n**What happens:**\n1. User account is created\n2. Verification token is generated and logged to console\n3. Verification email is sent with link: `${app.url}/api/auth/verify?token=<token>`\n\n**Example Response:**\n```json\n{\n    \"userId\": \"123e4567-e89b-12d3-a456-426614174000\",\n    \"name\": \"John Doe\",\n    \"email\": \"john.doe@example.com\",\n    \"isAccountVerified\": false\n}\n```"
					},
					"response": []
				},
				{
					"name": "Verify Email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.test(\"Email verified successfully\", function () {",
									"        pm.expect(jsonData.success).to.be.true;",
									"        pm.expect(jsonData.message).to.include(\"verified\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/verify?token={{token_verification}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"verify"
							],
							"query": [
								{
									"key": "token",
									"value": "{{token_verification}}",
									"description": "Verification token from email link"
								}
							]
						},
						"description": "Verify user email using token from verification link.\n\n**Query Parameters:**\n- `token` (string, required): Verification token from email link\n\n**Response:**\n- Status: 200 OK on success\n- Status: 400 Bad Request if token is invalid or expired\n\n**Example Success Response:**\n```json\n{\n    \"success\": true,\n    \"message\": \"Email verified successfully\"\n}\n```\n\n**Example Error Response:**\n```json\n{\n    \"error\": true,\n    \"message\": \"Invalid or expired token\"\n}\n```\n\n**Note:** After verification, user can login. Token expires in 24 hours."
					},
					"response": []
				},
				{
					"name": "Resend Verification Email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.test(\"Verification email resent successfully\", function () {",
									"        pm.expect(jsonData.success).to.be.true;",
									"        pm.expect(jsonData).to.have.property('email');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@example.com\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/resend-verification",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"resend-verification"
							]
						},
						"description": "Resend verification email to unverified user. Generates a new verification token.\n\n**Request Body:**\n- `email` (string, required): User's email address\n\n**Response:**\n- Status: 200 OK on success\n- Status: 404 Not Found if user doesn't exist\n- Status: 400 Bad Request if account is already verified\n\n**Example Success Response:**\n```json\n{\n    \"success\": true,\n    \"message\": \"Verification email has been resent. Please check your email.\",\n    \"email\": \"john.doe@example.com\"\n}\n```\n\n**Example Error Response (Already Verified):**\n```json\n{\n    \"error\": true,\n    \"message\": \"Account is already verified. Please login instead.\"\n}\n```\n\n**Example Error Response (User Not Found):**\n```json\n{\n    \"error\": true,\n    \"message\": \"User not found with this email\"\n}\n```\n\n**Use Cases:**\n- User didn't receive original verification email\n- Verification token expired (24 hours)\n- User tries to signup again with existing unverified email\n\n**Note:** Check application logs for the new verification token."
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.test(\"Login successful\", function () {",
									"        pm.expect(jsonData).to.have.property('token');",
									"        pm.expect(jsonData).to.have.property('email');",
									"    });",
									"    ",
									"    // Store token for authenticated requests",
									"    pm.environment.set(\"jwt_token\", jsonData.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"SecurePassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"login"
							]
						},
						"description": "Authenticate user and receive JWT token.\n\n**Request Body:**\n- `email` (string, required): User's email address\n- `password` (string, required): User's password\n\n**Response:**\n- Status: 200 OK on success\n- Status: 400 Bad Request for invalid credentials\n- Status: 401 Unauthorized if account is disabled\n\n**Example Success Response:**\n```json\n{\n    \"email\": \"john.doe@example.com\",\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}\n```\n\n**Note:** Token is also set as HTTP-only cookie. Use token in Authorization header for subsequent requests: `Bearer <token>`"
					},
					"response": []
				},
				{
					"name": "Check Authentication",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/isAuthenticated",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"isAuthenticated"
							]
						},
						"description": "Check if current user is authenticated.\n\n**Headers:**\n- `Authorization: Bearer <token>` (optional, can use cookie instead)\n\n**Response:**\n```json\n{\n    \"authenticated\": true,\n    \"email\": \"john.doe@example.com\"\n}\n```"
					},
					"response": []
				}
			],
			"description": "Authentication endpoints"
		},
		{
			"name": "Password Reset",
			"item": [
				{
					"name": "Request Password Reset",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.test(\"Reset link sent\", function () {",
									"        pm.expect(jsonData.success).to.be.true;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@example.com\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/request-password-reset",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"request-password-reset"
							]
						},
						"description": "Request password reset. Generates reset token and sends reset link via email.\n\n**Request Body:**\n- `email` (string, required): User's email address\n\n**Response:**\n- Status: 200 OK on success\n- Status: 400 Bad Request if email not found\n\n**Example Success Response:**\n```json\n{\n    \"success\": true,\n    \"message\": \"Password reset link has been sent to your email\"\n}\n```\n\n**What happens:**\n1. Reset token is generated and logged to console\n2. Reset email is sent with link: `${app.url}/api/auth/reset-password?token=<token>`\n3. Token expires in 15 minutes\n\n**Note:** Check application logs for the generated token value."
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.test(\"Password reset successful\", function () {",
									"        pm.expect(jsonData.success).to.be.true;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"{{token_reset}}\",\n    \"newPassword\": \"NewSecurePassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/reset-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"reset-password"
							]
						},
						"description": "Reset password using token from reset link.\n\n**Request Body:**\n- `token` (string, required): Reset token from email link\n- `newPassword` (string, required): New password\n\n**Alternative:** Token can also be passed as query parameter: `/api/auth/reset-password?token=<token>`\n\n**Response:**\n- Status: 200 OK on success\n- Status: 400 Bad Request if token is invalid or expired\n\n**Example Success Response:**\n```json\n{\n    \"success\": true,\n    \"message\": \"Password reset successfully\"\n}\n```\n\n**Example Error Response:**\n```json\n{\n    \"error\": true,\n    \"message\": \"Token has expired\"\n}\n```\n\n**Note:** Token expires in 15 minutes. After reset, user can login with new password."
					},
					"response": []
				}
			],
			"description": "Password reset flow endpoints"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "token_verification",
			"value": "",
			"type": "string",
			"description": "Verification token from signup email. Check application logs after signup."
		},
		{
			"key": "token_reset",
			"value": "",
			"type": "string",
			"description": "Reset token from password reset email. Check application logs after requesting reset."
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string",
			"description": "JWT token from login response"
		},
		{
			"key": "user_email",
			"value": "",
			"type": "string",
			"description": "User email from signup response"
		}
	]
}
